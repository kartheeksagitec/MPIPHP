<entity ID="entBenefitApplicationDetail" sfwActive="True" sfwStatus="Review" sfwType="BusinessRule" sfwMainCDO="icdoBenefitApplicationDetail" sfwObjectID="busBenefitApplicationDetail" sfwTableName="sgt_benefit_application_detail" sfwView="False" sfwDataObjectID="doBenefitApplicationDetail">
  <rules>
    <rule ID="VisibleRule-CheckAppDeatilStatusApproved" sfwExpression="(this.icdoBenefitApplicationDetail.application_detail_status_value == &quot;APPR&quot;) &#xD;&#xA;&amp;&amp; (this.icdoBenefitApplicationDetail.benefit_subtype_value == &quot;SPLR&quot; || this.icdoBenefitApplicationDetail.benefit_subtype_value == &quot;REDE&quot; || this.icdoBenefitApplicationDetail.benefit_subtype_value == &quot;URED&quot;)&#xD;&#xA;&amp;&amp;!(RFunc.GetValue&lt;Int32&gt;(this, &quot;iintPlan_ID&quot;) ==1)" sfwObjectBased="True" />
    <rule ID="VisibleRule-IfChildSupportFlgIsY" sfwExpression="(RFunc.GetValue&lt;String&gt;(this, &quot;ibusBenefitApplication.icdoBenefitApplication.child_support_flag&quot;) != &quot;Y&quot;)" sfwObjectBased="True" />
  </rules>
  <delete />
  <checklist />
  <initialload>
    <item ID="VisibleRule-CheckAppDeatilStatusApproved" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRule-IfChildSupportFlgIsY" sfwMode="All" sfwStatus="Active" />
  </initialload>
  <softerror />
  <harderror />
  <validatedelete />
  <groupslist />
  <aliaslist />
  <updateablecdo />
  <commonproperties />
  <expressionfields />
  <constraint />
  <queries>
    <query ID="GetBenDescriptionFromID" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT SCV.DESCRIPTION &#xD;&#xA;FROM SGT_PLAN_BENEFIT_XR SPBX WITH(NOLOCK) &#xD;&#xA;JOIN SGS_CODE_VALUE SCV WITH(NOLOCK) ON SCV.CODE_ID = SPBX.BENEFIT_OPTION_ID AND SCV.CODE_VALUE = SPBX.BENEFIT_OPTION_VALUE&#xD;&#xA;WHERE SPBX.PLAN_BENEFIT_ID = @PLAN_BENEFIT_ID">
      <parameters>
        <parameter ID="@PLAN_BENEFIT_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetPlan&amp;BenefitFromID" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT SCV.DESCRIPTION, sp.PLAN_NAME, sp.PLAN_ID,SCV.CODE_VALUE,sp.PLAN_CODE&#xD;&#xA;FROM SGT_PLAN_BENEFIT_XR SPBX WITH(NOLOCK) &#xD;&#xA;JOIN SGS_CODE_VALUE SCV WITH(NOLOCK) ON SCV.CODE_ID = SPBX.BENEFIT_OPTION_ID AND SCV.CODE_VALUE = SPBX.BENEFIT_OPTION_VALUE&#xD;&#xA;join SGT_PLAN sp WITH(NOLOCK) ON sp.PLAN_ID =SPBX.PLAN_ID&#xD;&#xA;WHERE SPBX.PLAN_BENEFIT_ID = @PLAN_BENEFIT_ID">
      <parameters>
        <parameter ID="@PLAN_BENEFIT_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetSurvivorName" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select LAST_NAME + ' ' + FIRST_NAME from SGT_PERSON WITH(NOLOCK) where PERSON_ID=@PERSON_ID">
      <parameters>
        <parameter ID="@PERSON_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetOrgName" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select ORG_NAME from SGT_ORGANIZATION WITH(NOLOCK) where ORG_ID=@ORG_ID">
      <parameters>
        <parameter ID="@ORG_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetBenefitFromPlanForDsblIAP" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT DISTINCT SPBX.*, SCV.DESCRIPTION &#xD;&#xA;FROM SGT_PLAN_BENEFIT_XR SPBX WITH(NOLOCK) &#xD;&#xA;JOIN SGS_CODE_VALUE SCV WITH(NOLOCK) ON SCV.CODE_ID = SPBX.BENEFIT_OPTION_ID AND SCV.CODE_VALUE = SPBX.BENEFIT_OPTION_VALUE&#xD;&#xA;WHERE PLAN_ID = @PLAN_ID and DISABILITY_FLAG='Y' and BENEFIT_OPTION_VALUE IN (@BENEFIT_OPTION_VALUE,'LUMP')">
      <parameters>
        <parameter ID="@PLAN_ID" sfwDataType="int" />
        <parameter ID="@BENEFIT_OPTION_VALUE" sfwDataType="string" />
      </parameters>
    </query>
    <query ID="GetBenefitFromPlanForRetrIAP" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT DISTINCT SPBX.*, SCV.DESCRIPTION &#xD;&#xA;FROM SGT_PLAN_BENEFIT_XR SPBX WITH(NOLOCK) &#xD;&#xA;JOIN SGS_CODE_VALUE SCV WITH(NOLOCK) ON SCV.CODE_ID = SPBX.BENEFIT_OPTION_ID AND SCV.CODE_VALUE = SPBX.BENEFIT_OPTION_VALUE&#xD;&#xA;WHERE PLAN_ID = @PLAN_ID and RETIREMENT_FLAG='Y' and BENEFIT_OPTION_VALUE IN (@BENEFIT_OPTION_VALUE,'LUMP')">
      <parameters>
        <parameter ID="@PLAN_ID" sfwDataType="int" />
        <parameter ID="@BENEFIT_OPTION_VALUE" sfwDataType="string" />
      </parameters>
    </query>
    <query ID="GetBenefitDetails" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT COUNT(*) FROM SGT_BENEFIT_APPLICATION_DETAIL where BENEFIT_APPLICATION_ID=@BENEFIT_APPLICATION_ID">
      <parameters>
        <parameter ID="@BENEFIT_APPLICATION_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="DeleteBenefitDetails" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="DELETE FROM SGT_BENEFIT_APPLICATION_DETAIL where BENEFIT_APPLICATION_ID=@BENEFIT_APPLICATION_ID">
      <parameters>
        <parameter ID="@BENEFIT_APPLICATION_ID" />
      </parameters>
    </query>
    <query ID="GetPayeeAcntIdFromDetailId" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT SPA.* FROM SGT_PAYEE_ACCOUNT SPA&#xD;&#xA;WHERE (SELECT TOP 1 Q.STATUS_VALUE FROM SGT_PAYEE_ACCOUNT_STATUS Q&#xD;&#xA;WHERE Q.PAYEE_ACCOUNT_ID =SPA.PAYEE_ACCOUNT_ID ORDER BY Q.MODIFIED_DATE DESC) &lt;&gt; 'CANC'&#xD;&#xA;AND SPA.BENEFIT_APPLICATION_DETAIL_ID = @BENEFIT_APPLICATION_DETAIL_ID&#xD;&#xA;">
      <parameters>
        <parameter ID="@BENEFIT_APPLICATION_DETAIL_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetPayeeAcntStatusByPayeeAcntID" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="&#xD;&#xA;SELECT * FROM SGT_PAYEE_ACCOUNT_STATUS WHERE PAYEE_ACCOUNT_ID=@PAYEE_ACCOUNT_ID AND STATUS_VALUE NOT IN('CANC')">
      <parameters>
        <parameter ID="@PAYEE_ACCOUNT_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetBenCalHeaderDetails" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT SBCH.* FROM SGT_BENEFIT_CALCULATION_HEADER SBCH&#xD;&#xA;INNER JOIN SGT_BENEFIT_CALCULATION_DETAIL SBCD&#xD;&#xA;ON SBCH.BENEFIT_CALCULATION_HEADER_ID = SBCD.BENEFIT_CALCULATION_HEADER_ID&#xD;&#xA;WHERE SBCH.BENEFIT_APPLICATION_ID = @BENEFIT_APPLICATION_ID&#xD;&#xA;AND SBCD.PLAN_ID = @PLAN_ID AND SBCH.STATUS_VALUE&lt;&gt;'CANC'">
      <parameters>
        <parameter ID="@BENEFIT_APPLICATION_ID" sfwDataType="int" />
        <parameter ID="@PLAN_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetLatestAdjustmentCalculation" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT&#xD;&#xA;  top 1 SBCD.* &#xD;&#xA;FROM&#xD;&#xA;  SGT_BENEFIT_CALCULATION_HEADER SBCH WITH(NOLOCK) &#xD;&#xA;  join SGT_BENEFIT_CALCULATION_DETAIL SBCD WITH(NOLOCK)&#xD;&#xA;  ON SBCH.BENEFIT_CALCULATION_HEADER_ID = SBCD.BENEFIT_CALCULATION_HEADER_ID &#xD;&#xA;WHERE&#xD;&#xA;  CALCULATION_TYPE_VALUE  = 'ADCL' AND&#xD;&#xA;  SBCD.BENEFIT_APPLICATION_DETAIL_ID = @BENEFIT_APPLICATION_DETAIL_ID &#xD;&#xA;ORDER  BY  SBCH.CREATED_BY desc">
      <parameters>
        <parameter ID="@BENEFIT_APPLICATION_DETAIL_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetBenefitOptionsForDeathPreRetPostElect90" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select * from SGT_PLAN_BENEFIT_XR WITH(NOLOCK) where &#xD;&#xA;BENEFIT_OPTION_VALUE in ('LIFE','LUMP',@BENOPTION) &#xD;&#xA;and PLAN_ID = @PLAN&#xD;&#xA;and RETIREMENT_FLAG = 'Y'">
      <parameters>
        <parameter ID="@BENOPTION" />
        <parameter ID="@PLAN" />
      </parameters>
    </query>
    <query ID="GetBenefitOptionsForIAP" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select * from SGT_PLAN_BENEFIT_XR WITH(NOLOCK) where &#xD;&#xA;BENEFIT_OPTION_VALUE in ('LIFE','LUMP') &#xD;&#xA;and PLAN_ID = 1&#xD;&#xA;and RETIREMENT_FLAG = 'Y'">
      <parameters />
    </query>
    <query ID="GetDisabilityRetirementRecord" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select count(*) from SGT_BENEFIT_APPLICATION sba &#xD;&#xA;inner join SGT_BENEFIT_APPLICATION_DETAIL spad&#xD;&#xA;on sba.BENEFIT_APPLICATION_ID =spad.BENEFIT_APPLICATION_ID&#xD;&#xA;where sba.BENEFIT_TYPE_VALUE='DSBL' and sba.APPLICATION_STATUS_VALUE='PEND' &#xD;&#xA;and sba.PERSON_ID = @person_id AND SBA.DISABILITY_CONVERSION_DATE IS NOT NULL&#xD;&#xA;">
      <parameters>
        <parameter ID="@person_id" sfwDataType="int" />
      </parameters>
    </query>
  </queries>
  <attributes>
    <attribute sfwValue="benefit_application_detail_id" sfwType="Column" sfwKeyNo="1" sfwIsIdentity="True" sfwDataType="int" sfwDBDataType="int" sfwIsNull="False" ID="BenefitApplicationDetailId" sfwIsSequence="False" sfwCaption="ID" />
    <attribute sfwValue="benefit_application_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="False" ID="BenefitApplicationId" sfwIsSequence="False" sfwCaption="Benefit Application Id" />
    <attribute sfwValue="plan_benefit_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="PlanBenefitId" sfwIsSequence="False" sfwCaption="Plan Benefit Id" />
    <attribute sfwValue="joint_annuitant_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="JointAnnuitantId" sfwIsSequence="False" sfwCaption="Joint Annuitant Id" />
    <attribute sfwValue="spousal_consent_flag" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="1" sfwIsNull="True" ID="SpousalConsentFlag" sfwIsSequence="False" sfwCaption="Spousal Consent Flag" />
    <attribute sfwValue="created_by" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="50" sfwIsNull="False" ID="CreatedBy" sfwIsSequence="False" sfwCaption="Created By" />
    <attribute sfwValue="created_date" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="datetime" sfwDBDataType="datetime" sfwIsNull="False" ID="CreatedDate" sfwIsSequence="False" sfwCaption="Created Date" />
    <attribute sfwValue="modified_by" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="50" sfwIsNull="False" ID="ModifiedBy" sfwIsSequence="False" sfwCaption="Modified By" />
    <attribute sfwValue="modified_date" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="datetime" sfwDBDataType="datetime" sfwIsNull="False" ID="ModifiedDate" sfwIsSequence="False" sfwCaption="Modified Date" />
    <attribute sfwValue="update_seq" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="False" ID="UpdateSeq" sfwIsSequence="False" sfwCaption="Update Seq" />
    <attribute sfwValue="survivor_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="SurvivorId" sfwIsSequence="False" sfwCaption="Survivor Id" />
    <attribute sfwValue="organization_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="OrganizationId" sfwIsSequence="False" sfwCaption="Organization Id" />
    <attribute sfwType="Description" ID="BenefitSubtypeDescription" sfwCaption="Benefit Subtype" sfwValue="benefit_subtype_description" />
    <attribute sfwValue="benefit_subtype_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="BenefitSubtypeId" sfwCodeID="1501" sfwIsSequence="False" sfwCaption="Benefit Subtype" />
    <attribute sfwValue="benefit_subtype_value" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="4" sfwIsNull="True" ID="BenefitSubtypeValue" sfwIsSequence="False" sfwCaption="Benefit Subtype" />
    <attribute sfwValue="ee_flag" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="1" sfwIsNull="True" ID="EeFlag" sfwIsSequence="False" sfwCaption="Ee Flag" />
    <attribute sfwValue="uvhp_flag" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="1" sfwIsNull="True" ID="UvhpFlag" sfwIsSequence="False" sfwCaption="Uvhp Flag" />
    <attribute sfwValue="l52_spl_acc_flag" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="1" sfwIsNull="True" ID="L52SplAccFlag" sfwIsSequence="False" sfwCaption="L52 Spl Acc Flag" />
    <attribute sfwValue="l161_spl_acc_flag" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="1" sfwIsNull="True" ID="L161SplAccFlag" sfwIsSequence="False" sfwCaption="L161 Spl Acc Flag" />
    <attribute sfwType="Description" ID="DroModelDescription" sfwCaption="Dro Model" sfwValue="dro_model_description" />
    <attribute sfwValue="dro_model_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="DroModelId" sfwCodeID="6004" sfwIsSequence="False" sfwCaption="Dro Model" />
    <attribute sfwValue="dro_model_value" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="4" sfwIsNull="True" ID="DroModelValue" sfwIsSequence="False" sfwCaption="Dro Model" />
    <attribute sfwType="Description" ID="ApplicationDetailStatusDescription" sfwCaption="Application Detail Status" sfwValue="application_detail_status_description" />
    <attribute sfwValue="application_detail_status_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="True" ID="ApplicationDetailStatusId" sfwCodeID="1503" sfwIsSequence="False" sfwCaption="Application Detail Status" />
    <attribute sfwValue="application_detail_status_value" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="4" sfwIsNull="True" ID="ApplicationDetailStatusValue" sfwIsSequence="False" sfwCaption="Application Detail Status" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrPlanName" sfwValue="istrPlanName" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSurvivorFullName" sfwValue="icdoBenefitApplicationDetail.istrSurvivorFullName" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanID" sfwValue="iintPlan_ID" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrBenefitOptionValue" sfwValue="icdoBenefitApplicationDetail.istrBenefitOptionValue" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintJointAnnuaintID" sfwValue="icdoBenefitApplicationDetail.iintJointAnnuaintID" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSurvivorTypeValue" sfwValue="icdoBenefitApplicationDetail.istrSurvivorTypeValue" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSubPlan" sfwValue="istrSubPlan" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSubPlanBenefitOptionValue" sfwValue="icdoBenefitApplicationDetail.istrSubPlanBenefitOptionValue" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrRelationShip" sfwValue="icdoBenefitApplicationDetail.istrRelationShip" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSubPlanDescription" sfwValue="istrSubPlanDescription" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrPlanBenefitDescription" sfwValue="istrPlanBenefitDescription" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecPercentage" sfwValue="icdoBenefitApplicationDetail.idecPercentage" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrFullName" sfwValue="icdoBenefitApplicationDetail.istrFullName" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrGender" sfwValue="icdoBenefitApplicationDetail.istrGender" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrDOB" sfwValue="icdoBenefitApplicationDetail.istrDOB" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSpousalConsent" sfwValue="icdoBenefitApplicationDetail.istrSpousalConsent" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrPlanDescription" sfwValue="icdoBenefitApplicationDetail.istrPlanDescription" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrPlanCode" sfwValue="icdoBenefitApplicationDetail.istrPlanCode" />
    <attribute sfwDataType="string" sfwType="Property" ID="IiintPlan_id" sfwValue="icdoBenefitApplicationDetail.iintPlan_id" />
    <attribute sfwDataType="datetime" sfwType="Property" ID="IdtDOB" sfwValue="icdoBenefitApplicationDetail.idtDOB" />
  </attributes>
  <methods />
  <lifecycle />
  <objectmethods>
    <method ID="GetPlanValues" sfwReturnType="Collection" sfwEntity="entPlan">
      <parameters />
    </method>
  </objectmethods>
  <ExtraFields />
</entity>